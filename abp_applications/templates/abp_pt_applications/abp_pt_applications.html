{% extends "base.html" %}

{% load static %}
{% block page_content %}
    <h1> {{ title }}</h1>

    <p>
        Over the coming years An Bord Plean√°la (ABP) will have to process a large
        volume of planning applications for housing as well as the energy,
        transport and heating infrastructure necessary to facilitate Ireland
        reaching its climate targets. Unfortunately, in recent years ABP has
        been beset by scandals and delays raising questions about whether it is able
        to deal with the required throughput of applications.
    </p>

    <p>
        Here I want to examine how long it is taking to decide on public
        transport infrastructure applications. To do this I looked up the
        application codes for all of the major public transport projects which
        have reached the ABP planning application stage. I then wrote some code
        to retrieve the information for each of the planning application pages
        from ABPs website for each relevant public transport project. The time
        taken for planning application consideration to date is shown in the plot below.
    </p>
    <img src="{% static 'abp_pt_applications/time_taken.png' %}" alt="Time taken by ABP per project" style="width:80%">

    <p>
        I've written a script that should update this image daily so check back
        to see how long these planning applications take. I will endeavour to add
        new projects as they get submitted.
    </p>
    <p>{{ applications_description }}</p>

    <p> Below is a table of the applications:</p>
        <table style="border:1px solid black">
        <tr style="border:1px solid black">
            <td style="border:1px solid black">ID</td>
            <td style="border:1px solid black">Project</td>
            <td style="border:1px solid black">Decision</td>
            <td style="border:1px solid black">Time Taken</td>
        </tr>
        {% for application in applications %}
        <tr style="border:1px solid black">
            <td style="border:1px solid black">{{ application.application_id }}</td>
            <td style="border:1px solid black">{{ application.application_name }}</td>
            <td style="border:1px solid black">{{ application.application_decision }}</td>
            <td style="border:1px solid black">{{ application.application_time_taken }}</td>
        </tr>
        {% endfor %}
    </table>

    <p>
        If you are interested in seeing how this was done the code for this
        project is available on my GitHub
            <a href="https://github.com/rmcg123/abp_public_transport_applications">here</a>
    </p>
{% endblock page_content %}